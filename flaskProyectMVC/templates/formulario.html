{% extends 'plantilla.html' %}
{% block body %}

<div class="container mt-5">
  <div class="row">
    <div class="col-md-6">

      <h2 class="mb-4 text-primary">Registro de Álbumes</h2>

      {% with mensajes = get_flashed_messages() %}
        {% if mensajes %}
          {% for msj in mensajes %}
            <div class="alert alert-info">{{ msj }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      <form action="{{ url_for('albums.guardar') }}" method="POST">
        <div class="mb-3">
          <label for="txtTitulo" class="form-label">Título</label>
          <input type="text" class="form-control" id="txtTitulo" name="txtTitulo" placeholder="Título" value="{{ request.form.txtTitulo }}">
          {% if errores and errores.txtTitulo %}
            <div class="text-danger">{{ errores.txtTitulo }}</div>
          {% endif %}
        </div>

        <div class="mb-3">
          <label for="txtArtista" class="form-label">Artista</label>
          <input type="text" class="form-control" id="txtArtista" name="txtArtista" placeholder="Artista" value="{{ request.form.txtArtista }}">
          {% if errores and errores.txtArtista %}
            <div class="text-danger">{{ errores.txtArtista }}</div>
          {% endif %}
        </div>

        <div class="mb-3">
          <label for="txtAnio" class="form-label">Año de publicación</label>
          <input type="number" class="form-control" id="txtAnio" name="txtAnio" placeholder="Año de publicación" value="{{ request.form.txtAnio }}">
          {% if errores and errores.txtAnio %}
            <div class="text-danger">{{ errores.txtAnio }}</div>
          {% endif %}
        </div>

        <button type="submit" class="btn btn-success">Guardar Álbum</button>
      </form>

    </div>
<div class="col-md-6">
  <h3 class="mt-4">Álbumes Registrados</h3>
  <table class="table table-striped mt-3">
    <thead>
      <tr>
        <th>ID</th>
        <th>Álbum</th>
      </tr>
    </thead>
    <tbody>
      {% for alb in albums %}
        <tr>
          <td>{{ alb.id }}</td>
          <td>
            <a href="{{ url_for('albums.detalle', id=alb.id) }}">
              {{ alb.album }}
            </a>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <a href="/consulta" class="btn btn-link mt-2">Abrir vista Consulta</a>
</div>

  </div>
</div>
{% endblock %}